From: DynamicDevices <support@dynamicdevices.co.uk>
Date: Fri, 10 Jan 2025 14:00:00 +0000
Subject: [PATCH] wifi: Don't clear secrets if stored in keyfile for headless systems

On headless systems without secret agents, NetworkManager should retry
with existing PSK from connection file instead of clearing secrets and
requesting new ones when 4-way handshake fails.

This prevents the "no secrets" error that blocks auto-reconnection on
headless embedded systems. When secrets are stored in the connection
file (psk-flags=0), we should retry with the existing PSK rather than
assuming the PSK is wrong and requesting new secrets from a non-existent
secret agent.

Signed-off-by: DynamicDevices <support@dynamicdevices.co.uk>

---
 #       NM_VERSION_x_y_z macros in
 #       "src/libnm-core-public/nm-version-macros.h.in"
-  version: '1.52.1',
+  version: '1.52.2',
   license: 'GPL2+',
   default_options: [
     'buildtype=debugoptimized',
-- 
2.34.1

